{"version":3,"sources":["webpack:///./js/theme-switch.js","webpack:///./js/back-to-top.js","webpack:///./js/refs.js","webpack:///./js/modal-team.js","webpack:///./js/genres.js","webpack:///./js/api.js","webpack:///./js/pluginOn.js","webpack:///./index.js","webpack:///./js/firebase-login.js","webpack:///./templates/movieCard.hbs","webpack:///./templates/modal-movie-card.hbs"],"names":["input","document","querySelector","Theme","addEventListener","theme","localStorage","getItem","body","className","setItem","checked","addBackToTop","diameter","backgroundColor","textColor","refs","searchInput","moviesCardsGallery","movieInfoModal","loadWatchedBtn","loadQueueBtn","addWatchedBtn","addQueueBtn","openModalTeamBtn","modalTeamOverlay","closeModalTeamBtn","btnNextPagination","btnPrevPagination","paginationControls","onCloseModalTeam","classList","remove","window","onPressEscape","event","code","add","preventDefault","target","currentTarget","genres","id","name","API_KEY","ApiService","selectControl","this","totalPagas","page","searchQuery","watched","queue","_watchedFromLocalStorage","_queueFromLocalStorage","fetchMovieByID","id_movie","fetch","BASE_URL_MOVIEID","then","response","status","Error","json","movieAdapter","poster_path","original_title","original_name","title","vote_average","release_date","first_air_date","vote_count","popularity","overview","genre_ids","imgSrc","generatePosterPath","rating","releaseDate","Number","parseInt","voteCount","genre","changeGenresList","ids","genresIdsArr","map","_el","index","newArr","el","indexOf","filter","length","slice","join","fetchGenresMovieList","GENRE_MOVIE_LIST","imageName","fetchSearchMoviesList","query","BASE_URL_SEARCH","responce","movies","total_pages","testfoo","fetchPopularMoviesList","BASE_URL_TRENDING","undefined","pagination","fetchWatchedMoviesList","loadWatchedMovies","watchedMoviesArr","forEach","movie","Promise","all","console","log","catch","error","fetchQueueMoviesList","fetchModalMovie","watchedString","JSON","parse","loadQueueMovies","queueString","addWatchedMovies","movieId","push","stringify","addQueueMovies","renderMovieCards","moviesArray","insertAdjacentHTML","movieCard","renderMovie","movieObj","checkValueLocalStorage","incrementPage","resetPage","current","last","addButtonWithIndex","addButtonInput","i","innerHTML","goToPrevPage","goToNextPage","require","defaults","pluginError","text","closer","sticker","delay","shadow","debounce","Api","clear","movieAdaptedandRender","fetchPopularMoviesListTEST","onSearch","value","total_results","onSearchTEST","results","loadWatched","loadQueue","currentPage","getElementsByTagName","contains","nodeName","a","textContent","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","openLogInModal","LogInRef","closeModalBtn","logInBtnRef","logOutBtnRef","signInBtnRef","closeOverlayRef","auth","closeModal","removeEventListener","isEscape","email","getElementById","password","signInWithEmailAndPassword","e","alert","message","signOut","createUserWithEmailAndPassword","openSignUpModal","SignUpRef","closeSignUpModalBtn","closeSignUpOverlayRef","closeSignUpModal","onAuthStateChanged","user","style","display","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"8EAAA,IAAMA,EAAQC,SAASC,cAAc,wBAC/BC,EACG,cADHA,EAEE,aAGRH,EAAMI,iBAAiB,UAEvB,WACI,IAAMC,EACNC,aAAaC,QAAQ,WAAaJ,EAChCA,EACAA,EAEFF,SAASO,KAAKC,UAAYJ,EAC1BC,aAAaI,QAAQ,QAASL,MAI1BC,aAAaC,QAAQ,UACrBN,SAASO,KAAKC,UAAYH,aAAaC,QAAQ,SAC/CP,EAAMW,QAAUL,aAAaC,QAAQ,WAAaJ,GAElDG,aAAaI,QAAQ,QAASP,I,8GCrBtCS,uBAAa,CACTC,SAAU,GACVC,gBAAiB,OACjBC,UAAW,Y,cCWAC,EAhBF,CACXC,YAAahB,SAASC,cAAc,iBAEpCgB,mBAAoBjB,SAASC,cAAc,gBAC3CiB,eAAgBlB,SAASC,cAAc,gBACvCkB,eAAgBnB,SAASC,cAAc,wBACvCmB,aAAcpB,SAASC,cAAc,sBACrCoB,cAAerB,SAASC,cAAc,sBACtCqB,YAAatB,SAASC,cAAc,oBACpCsB,iBAAkBvB,SAASC,cAAc,qBACzCuB,iBAAkBxB,SAASC,cAAc,0BACzCwB,kBAAmBzB,SAASC,cAAc,sBAC1CyB,kBAAmB1B,SAASC,cAAc,0BAC1C0B,kBAAmB3B,SAASC,cAAc,0BAC1C2B,mBAAoB5B,SAASC,cAAc,oCCJ7C,SAAS4B,IACPd,EAAKS,iBAAiBM,UAAUC,OAAO,QACvCC,OAAO7B,iBAAiB,UAAW8B,GASrC,SAASA,EAAcC,GACF,WAAfA,EAAMC,MACRN,IArBJd,EAAKQ,iBAAiBpB,iBAAiB,SAIvC,WACEY,EAAKS,iBAAiBM,UAAUM,IAAI,QACpCJ,OAAO7B,iBAAiB,UAAW8B,MALrClB,EAAKU,kBAAkBtB,iBAAiB,QAAS0B,GACjDd,EAAKS,iBAAiBrB,iBAAiB,SAUvC,SAAiC+B,GAC/BA,EAAMG,iBACFH,EAAMI,SAAWJ,EAAMK,eACzBV,O,qKCIWW,G,UArBA,CACb,CAAEC,GAAI,GAAIC,KAAM,UAChB,CAAED,GAAI,GAAIC,KAAM,aAChB,CAAED,GAAI,GAAIC,KAAM,aAChB,CAAED,GAAI,GAAIC,KAAM,UAChB,CAAED,GAAI,GAAIC,KAAM,SAChB,CAAED,GAAI,GAAIC,KAAM,eAChB,CAAED,GAAI,GAAIC,KAAM,SAChB,CAAED,GAAI,MAAOC,KAAM,UACnB,CAAED,GAAI,GAAIC,KAAM,WAChB,CAAED,GAAI,GAAIC,KAAM,WAChB,CAAED,GAAI,GAAIC,KAAM,UAChB,CAAED,GAAI,MAAOC,KAAM,SACnB,CAAED,GAAI,KAAMC,KAAM,WAClB,CAAED,GAAI,MAAOC,KAAM,WACnB,CAAED,GAAI,IAAKC,KAAM,mBACjB,CAAED,GAAI,MAAOC,KAAM,YACnB,CAAED,GAAI,GAAIC,KAAM,YAChB,CAAED,GAAI,MAAOC,KAAM,OACnB,CAAED,GAAI,GAAIC,KAAM,a,oTCnBlB,IAAMC,EAAU,mC,cAYKC,E,WAEnB,WAAYC,GAAe,8BADlB,IAEPC,KAAKC,WAAa,EAClBD,KAAKE,KAAO,EACZF,KAAKG,YAAc,GACnBH,KAAKI,QAAU,GACfJ,KAAKK,MAAQ,GACbL,KAAKM,yBAA2B,GAChCN,KAAKO,uBAAyB,GAC9BP,KAAKD,cAAgBA,E,iCAGvBS,eAAA,SAAeC,GACb,OAAOC,MAASC,sCAAoBF,EAAxB,YAA4CZ,GAAWe,MACjE,SAAAC,GACE,GAAwB,QAApBA,EAASC,OAAkB,MAAM,IAAIC,MACzCF,EAASG,W,EAKfC,aAAA,YAaG,IAZDC,EAYC,EAZDA,YACAC,EAWC,EAXDA,eACAC,EAUC,EAVDA,cACAC,EASC,EATDA,MACA1B,EAQC,EARDA,GACA2B,EAOC,EAPDA,aACAC,EAMC,EANDA,aACAC,EAKC,EALDA,eACAC,EAIC,EAJDA,WACAC,EAGC,EAHDA,WACAC,EAEC,EAFDA,SACAC,EACC,EADDA,UAEA,MAAO,CAELC,OAAQ7B,KAAK8B,mBAAmBZ,GAChCG,MAAOF,GAAkBC,GAAiBC,EAC1CU,OAAQT,EACRU,YACEC,OAAOC,SAASX,IAAiBU,OAAOC,SAASV,GACnDW,UAAWV,EACXC,WAAYA,EACZC,SAAUA,EACVhC,GAAIA,EACJyC,MAAOpC,KAAKqC,iBAAiBT,K,EAGjCS,iBAAA,SAAiBC,GACf,IAAMC,EAAe7C,EAAO8C,KAAI,SAACC,EAAKC,GAAN,OAAgBhD,EAAOgD,GAAO/C,MACxDgD,EAASL,EACZE,KAAI,SAAAI,GACH,OAAOL,EAAaM,QAAQD,MAE7BE,QAAO,SAAAF,GAAE,OAAY,IAARA,KACbJ,KAAI,SAAAI,GAAE,OAAIlD,EAAOkD,GAAIhD,QAExB,OAAK+C,EAAOI,OAGLJ,EAAOI,OAAS,EACnBJ,EAAOK,MAAM,EAAG,GAAGC,KAAK,MAAQ,UAChCN,EAAOM,KAAK,KAJP,Y,EAOXC,qBAAA,WACE,OAAOxC,MACFyC,yDAA4BtD,EADrB,SACqCG,KAAKE,MACpDU,MAAK,SAAAC,GAAQ,OAAIA,EAASG,W,EAG9Bc,mBAAA,SAAmBsB,GACjB,MAlFe,gDAkFQA,G,EAGzBC,sBAAA,SAAsBC,GAAO,WAC3B,OAAO5C,MACF6C,qDAA2B1D,EADpB,UACqCyD,EADrC,SACmDtD,KAAKE,MAEjEU,MAAK,SAAA4C,GAAQ,OAAIA,EAASxC,UAC1BJ,MAAK,SAAA6C,GAGJ,OAFA,EAAKxD,WAAawD,EAAOC,YACzB,EAAKC,UACEF,M,EAIbG,uBAAA,WAAyB,WACvB,OAAOlD,MAASmD,yDAA6BhE,EAAjC,SAAiDG,KAAKE,MAC/DU,MAAK,SAAAC,GAAQ,OAAIA,EAASG,UAC1BJ,MAAK,SAAA6C,GAGJ,OAFA,EAAKxD,WAAawD,EAAOC,YACzB,EAAKC,UACEF,M,EAGbE,QAAA,gBAC6BG,IAAvB9D,KAAKD,eAGTC,KAAK+D,WAAW/D,KAAKE,KAAMF,KAAKC,a,EAElC+D,uBAAA,WAAyB,WACvBhE,KAAKiE,oBACL,IAAMC,EAAmBlE,KAAKM,yBAAyB6D,SAAQ,SAAAC,GAC7D,EAAK5D,oBAEP6D,QAAQC,IAAIJ,GACXtD,MAAK,SAAAwD,GAAK,OAAIG,QAAQC,IAAIJ,MAC1BK,OAAM,SAAAC,GAAK,OAAIH,QAAQC,IAAIE,O,EAG9BC,qBAAA,a,EAEAC,gBAAA,a,EAEAX,kBAAA,WAEE,IAAMY,EAAgBtH,aAAaC,QAAQ,WAC3CwC,KAAKM,yBAA2BwE,KAAKC,MAAMF,I,EAG7CG,gBAAA,WAEE,IAAMC,EAAc1H,aAAaC,QAAQ,SACzCwC,KAAKO,uBAAyBuE,KAAKC,MAAME,I,EAW3CC,iBAAA,SAAiBC,GACfnF,KAAKI,QAAQgF,KAAKD,GAClB5H,aAAaI,QAAQ,UAAWmH,KAAKO,UAAUrF,KAAKI,W,EAEtDkF,eAAA,SAAeH,GACbnF,KAAKK,MAAM+E,KAAKD,GAChB5H,aAAaI,QAAQ,QAASmH,KAAKO,UAAUrF,KAAKK,S,EAGpDkF,iBAAA,SAAiBC,GACfvH,EAAKE,mBAAmBsH,mBACtB,YACAC,IAAUF,K,EAIdG,YAAA,SAAYC,K,EAEZC,uBAAA,WACE7F,KAAKgF,mBACAhF,KAAKK,QAAU,KACpB9C,aAAaI,QAAQ,QAASmH,KAAKO,UAAUrF,KAAKK,QAClDL,KAAKiE,qBACAjE,KAAKI,UAAY,IACtB7C,aAAaI,QAAQ,UAAWmH,KAAKO,UAAUrF,KAAKI,Y,EAEtD0F,cAAA,WACE9F,KAAKE,MAAQ,G,EAGf6F,UAAA,WACE/F,KAAKE,KAAO,G,EAId6D,WAAA,SAAWiC,EAASC,GAClB,IAAI5G,EAAOW,KAAKkG,mBAAmB,GAE/BF,EAAU,EAAAhG,KAAH,GAAiB,IAAGX,GAAQW,KAAKmG,kBAE5C,IAAK,IAAIC,EAAIJ,EAAU,EAAAhG,KAAH,GAAgBoG,GAAKJ,EAAU,EAAAhG,KAAH,GAAgBoG,IAC1DA,EAAI,GAAKA,EAAIH,IACf5G,GAAQW,KAAKkG,mBAAmBE,IAIhCJ,EAAU,EAAAhG,KAAH,GAAiBiG,EAAO,IAAG5G,GAAQW,KAAKmG,kBAEnD9G,GAAQW,KAAKkG,mBAAmBD,GAEhCjG,KAAKD,cAAcsG,UAAYhH,G,EAGjC6G,mBAAA,SAAmBxD,GACjB,wEAAwEA,EAAxE,qDAAkIA,EAAlI,kB,EAEFyD,eAAA,WACE,+I,EAGFG,aAAA,WACoB,IAAdtG,KAAKE,OAGTF,KAAKE,MAAQ,I,EAGfqG,aAAA,WACMvG,KAAKE,OAASF,KAAKC,WAAa,IAGpCD,KAAKE,MAAQ,I,sDA9Eb,OAAOF,KAAKM,2B,4CAIZ,OAAON,KAAKO,4B,gCCjJRmE,G,UAAU8B,EAAQ,QAAlB9B,OACA+B,EAAaD,EAAQ,QAArBC,SAMR,SAASC,IACP,OAAOhC,EAAM,CACXiC,KAAM,+BAPVF,EAASG,QAAS,EAClBH,EAASI,SAAU,EACnBJ,EAASK,MAAQ,IACjBL,EAASM,QAAS,E,cCDZC,EAAWR,EAAQ,QAInBS,EAAM,IAAInH,EAAW7B,EAAKa,oBAyDhC,SAAS8E,IACPsD,IACAD,EAAIlB,YACJkB,EAAIrD,yBAAyBhD,MAAK,SAAA6C,GAAM,OAAI0D,EAAsB1D,MAGpE,SAAS2D,IACPF,IACAD,EAAIrD,yBAAyBhD,MAAK,SAAA6C,GAAM,OAAI0D,EAAsB1D,MAIpE,SAAS4D,EAASjI,GAMhB,GALAA,EAAMG,iBACN2H,IACAD,EAAIlB,YACJkB,EAAI9G,YAAcf,EAAMI,OAAO8H,MAC/B/C,QAAQC,IAAI,mBAAoByC,EAAI9G,cAC/B8G,EAAI9G,YACP,OAAOyD,IAETqD,EAAI5D,sBAAsB4D,EAAI9G,aAAaS,MAAK,SAAA6C,GAE9C,GADA0D,EAAsB1D,IACjBA,EAAO8D,cACV,OAAOb,OAIb,SAASc,IACPN,IACAD,EAAI9G,YAAclC,EAAKC,YAAYoJ,MACnCL,EAAI5D,sBAAsB4D,EAAI9G,aAAaS,MAAK,SAAA6C,GAE9C,GADA0D,EAAsB1D,IACjBA,EAAO8D,cACV,OAAOb,OAMb,SAASQ,IACPjJ,EAAKE,mBAAmBkI,UAAY,GAGtC,SAASc,EAAsB1D,GAC7B,GAAIA,EAAOgE,QAAS,CAClB,IAAMjC,EAAc/B,EAAOgE,QAAQjF,KAAI,SAAA4B,GAAK,OAAI6C,EAAIhG,aAAamD,MACjE,OAAO6C,EAAI1B,iBAAiBC,GAE9B,OAAOyB,EAAI1B,iBAAiB9B,GAI9B,SAASiE,IACPR,IACAD,EAAIlB,YACJ9H,EAAKI,eAAeW,UAAUM,IAAI,cAClCrB,EAAKK,aAAaU,UAAUC,OAAO,cACnCsF,QAAQC,IAAI,mCACZyC,EAAIjD,yBAAyBpD,MAAK,SAAA6C,GAAM,OAAI0D,EAAsB1D,MAGpE,SAASkE,IACPT,IACAD,EAAIlB,YACJ9H,EAAKI,eAAeW,UAAUC,OAAO,cACrChB,EAAKK,aAAaU,UAAUM,IAAI,cAChCiF,QAAQC,IAAI,wDACZyC,EAAItC,uBAAuB/D,MAAK,SAAA6C,GAAM,OAAI0D,EAAsB1D,MA3HlEvE,OAAO7B,iBAAiB,QAwCxB,WACE4J,EAAIpB,yBACJ,IAAM+B,EAAc1K,SAAS2K,qBAAqB,QAAQ,GACtDD,EAAY5I,UAAU8I,SAAS,eACjClE,IACA3F,EAAKC,YAAYb,iBAAiB,QAAS2J,EAASK,EAAU,OAE5DO,EAAY5I,UAAU8I,SAAS,kBACjC7J,EAAKI,eAAehB,iBAAiB,QAASqK,GAC9CzJ,EAAKK,aAAajB,iBAAiB,QAASsK,GAC5CD,QAhDJzJ,EAAKY,kBAAkBxB,iBAAiB,SAAS,WAE/C,GADA4J,EAAIX,gBACCW,EAAI9G,YACP,OAAOiH,IAETI,OAEFvJ,EAAKW,kBAAkBvB,iBAAiB,SAAS,WAE/C,GADA4J,EAAIV,gBACCU,EAAI9G,YACP,OAAOiH,IAETI,OAEFvJ,EAAKa,mBAAmBzB,iBAAiB,SAAS,SAAA+B,GAChD,GAA8B,WAA1BA,EAAMI,OAAOuI,SAAuB,CACtC,IAAMC,EAAI/F,OAAO7C,EAAMI,OAAOyI,aAE9B,GADAhB,EAAI/G,KAAO8H,GACNf,EAAI9G,YAEP,YADAiH,IAGFI,QAGJvJ,EAAKa,mBAAmBzB,iBAAiB,YAAY,SAAA+B,GACnD,GAA8B,UAA1BA,EAAMI,OAAOuI,SAAsB,CACrC,IAAMC,EAAI/F,OAAO7C,EAAMI,OAAO8H,OAE9B,GADAL,EAAI/G,KAAO8H,GACNf,EAAI9G,YAEP,YADAiH,IAGFI,S,mBCtCJU,SAASC,cATM,CACXC,OAAQ,0CACRC,WAAY,mCACZC,UAAW,mBACXC,cAAe,+BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAInB,IAAMC,EAAiBzL,SAASC,cAAc,aACxCyL,EAAW1L,SAASC,cAAc,wCAClC0L,EAAgB3L,SAASC,cAAc,wCACvC2L,EAAc5L,SAASC,cAAc,+BACrC4L,EAAe7L,SAASC,cAAc,gCACtC6L,EAAe9L,SAASC,cAAc,gCACtC8L,EAAkB/L,SAASC,cAAc,sBAEzC+L,EAAOhB,SAASgB,OAgBtB,SAASC,EAAW/J,GAClBA,EAAMG,iBACNoJ,EAAe3J,UAAUC,OAAO,WAChCC,OAAOkK,oBAAoB,UAAWC,GAhBxCT,EAASvL,iBAAiB,SAO1B,SAAsB+B,GACpBA,EAAMG,iBACNoJ,EAAe3J,UAAUM,IAAI,WAC7BJ,OAAO7B,iBAAiB,UAAWgM,MATrCR,EAAcxL,iBAAiB,QAAS8L,GACxCF,EAAgB5L,iBAAiB,SAiBjC,SAAsB+B,GACpBA,EAAMG,iBACFH,EAAMI,SAAWJ,EAAMK,eACzB0J,EAAW/J,MAnBf0J,EAAYzL,iBAAiB,SAuE7B,WAEC,IAAMiM,EAAQpM,SAASqM,eAAe,eAChCC,EAAWtM,SAASqM,eAAe,kBAEzBL,EAAKO,2BAA2BH,EAAMhC,MAAOkC,EAASlC,OAC3D7C,OAAM,SAAAiF,GAAC,OAAIC,MAAMD,EAAEE,YAC3BjB,EAAe3J,UAAUC,OAAO,WAChC0K,MAAM,sCA9EVZ,EAAa1L,iBAAiB,SAiF9B,WAEI6L,EAAKW,UACLlB,EAAe3J,UAAUC,OAAO,WACnC0K,MAAM,2BApFPX,EAAa3L,iBAAiB,SA2D9B,WAEG,IAAMiM,EAAQpM,SAASqM,eAAe,SAChCC,EAAWtM,SAASqM,eAAe,YACzBL,EAAKY,+BAA+BR,EAAMhC,MAAOkC,EAASlC,OAClE7C,OAAM,SAAAiF,GAAC,OAAIC,MAAMD,EAAEE,YAC3BG,EAAgB/K,UAAUC,OAAO,WACjC0K,MAAM,6BA5CT,IAAMI,EAAkB7M,SAASC,cAAc,eACzC6M,EAAY9M,SAASC,cAAc,yCACnC8M,EAAsB/M,SAASC,cAAc,+CAC7C+M,EAAwBhN,SAASC,cAAc,wBAYrD,SAASgN,EAAiB/K,GACxBA,EAAMG,iBACNwK,EAAgB/K,UAAUC,OAAO,WACjCC,OAAOkK,oBAAoB,UAAWC,GAUxC,SAASA,EAASjK,GACG,WAAfA,EAAMC,OACP8J,EAAW/J,GACX+K,EAAiB/K,IA1BtB4K,EAAU3M,iBAAiB,SAI3B,SAAuB+B,GACrBA,EAAMG,iBACNwK,EAAgB/K,UAAUM,IAAI,WAC9BJ,OAAO7B,iBAAiB,UAAWgM,MANrCY,EAAoB5M,iBAAiB,QAAS8M,GAC9CD,EAAsB7M,iBAAiB,SAcvC,SAA4B+B,GAC1BA,EAAMG,iBACFH,EAAMI,SAAWJ,EAAMK,eACxB0K,EAAiB/K,MAyCtB8J,EAAKkB,oBAAmB,SAASC,GAE7BA,GAEEnN,SAASqM,eAAe,YAAYe,MAAMC,QAAU,QACpDrN,SAASqM,eAAe,aAAae,MAAMC,QAAU,SAGzDrN,SAASqM,eAAe,YAAYe,MAAMC,QAAU,OAC9CrN,SAASqM,eAAe,aAAae,MAAMC,QAAU,a,qBC3H7D,IAAIC,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAeC,EAAO,WAAYC,EAAOZ,EAAUa,iBAAkBC,EAAiBd,EAAUc,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,0HACHJ,SAASP,EAAuH,OAA7GA,EAASS,EAAeZ,EAAQ,YAAwB,MAAVD,EAAiBa,EAAeb,EAAO,UAAYA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,SAAS,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACtT,2BACAO,SAASP,EAA+G,OAArGA,EAASS,EAAeZ,EAAQ,QAAoB,MAAVD,EAAiBa,EAAeb,EAAO,MAAQA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,KAAK,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC1S,wDACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACnT,mDACAO,SAASP,EAAuH,OAA7GA,EAASS,EAAeZ,EAAQ,YAAwB,MAAVD,EAAiBa,EAAeb,EAAO,UAAYA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,SAAS,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACtT,mBACAO,SAASP,EAAiI,OAAvHA,EAASS,EAAeZ,EAAQ,iBAA6B,MAAVD,EAAiBa,EAAeb,EAAO,eAAiBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACrU,qBACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASL,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIiB,EAON,MAAO,QACqR,OAAtRA,GARyBrB,EAAUc,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAMQd,EAAQ,QAAQkB,KAAe,MAAVnB,EAAiBA,EAAUD,EAAUO,aAAe,GAAIN,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUsB,QAAQ,EAAGlB,EAAM,GAAG,QAAUJ,EAAUuB,KAAK,KAAOnB,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAAiBiB,EAAS,KAC5S,SAAU,K,qBC/BZ,IAAIzB,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAeC,EAAO,WAAYC,EAAOZ,EAAUa,iBAAkBC,EAAiBd,EAAUc,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,oHACHJ,SAASP,EAAmI,OAAzHA,EAASS,EAAeZ,EAAQ,kBAA8B,MAAVD,EAAiBa,EAAeb,EAAO,gBAAkBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACxU,UACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACnT,qBACAO,SAASP,EAA+G,OAArGA,EAASS,EAAeZ,EAAQ,QAAoB,MAAVD,EAAiBa,EAAeb,EAAO,MAAQA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,KAAK,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC1S,2FACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACnT,ygBACAO,SAASP,EAAiI,OAAvHA,EAASS,EAAeZ,EAAQ,iBAA6B,MAAVD,EAAiBa,EAAeb,EAAO,eAAiBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACvU,WACAO,SAASP,EAA6H,OAAnHA,EAASS,EAAeZ,EAAQ,eAA2B,MAAVD,EAAiBa,EAAeb,EAAO,aAAeA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,YAAY,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,QAAUC,GAClU,2DACAO,SAASP,EAA+H,OAArHA,EAASS,EAAeZ,EAAQ,gBAA4B,MAAVD,EAAiBa,EAAeb,EAAO,cAAgBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,aAAa,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACpU,2DACAO,SAASP,EAAqI,OAA3HA,EAASS,EAAeZ,EAAQ,mBAA+B,MAAVD,EAAiBa,EAAeb,EAAO,iBAAmBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,gBAAgB,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GAC7U,+DACAO,SAASP,EAAuH,OAA7GA,EAASS,EAAeZ,EAAQ,YAAwB,MAAVD,EAAiBa,EAAeb,EAAO,UAAYA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,SAAS,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACxT,0IACAO,SAASP,EAA2H,OAAjHA,EAASS,EAAeZ,EAAQ,cAA0B,MAAVD,EAAiBa,EAAeb,EAAO,YAAcA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GAC9T,sMACAO,SAASP,EAA+G,OAArGA,EAASS,EAAeZ,EAAQ,QAAoB,MAAVD,EAAiBa,EAAeb,EAAO,MAAQA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,KAAK,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GAC5S,2HACAO,SAASP,EAA+G,OAArGA,EAASS,EAAeZ,EAAQ,QAAoB,MAAVD,EAAiBa,EAAeb,EAAO,MAAQA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,KAAK,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GAC5S,iRACJ,SAAU,M","file":"main.0f436b3f4339b74aeee9.js","sourcesContent":["const input = document.querySelector('#theme-switch-toggle');\r\nconst Theme = {\r\n  LIGHT: 'light-theme',\r\n  DARK: 'dark-theme',\r\n};\r\n\r\ninput.addEventListener('change', changeTheme);\r\n\r\nfunction changeTheme() {\r\n    const theme =\r\n    localStorage.getItem('theme') === Theme.LIGHT\r\n    ? Theme.DARK\r\n    : Theme.LIGHT;\r\n\r\n    document.body.className = theme;\r\n    localStorage.setItem('theme', theme);\r\n}\r\n\r\nfunction saveData() {\r\n    if (localStorage.getItem('theme')) {\r\n        document.body.className = localStorage.getItem('theme');\r\n        input.checked = localStorage.getItem('theme') === Theme.LIGHT ? false : true;\r\n      } else {\r\n        localStorage.setItem('theme', Theme.LIGHT);\r\n      }\r\n}\r\n\r\nsaveData()","import {addBackToTop} from 'vanilla-back-to-top';\r\n\r\naddBackToTop({\r\n    diameter: 56,\r\n    backgroundColor: '#ddd',\r\n    textColor: '#ff6b08'\r\n})\r\n;","const refs = {\r\n  searchInput: document.querySelector('.search-input'),\r\n  // searchBtn: document.querySelector('search-button'),\r\n  moviesCardsGallery: document.querySelector('.movie__list'),\r\n  movieInfoModal: document.querySelector('.modal-movie'),\r\n  loadWatchedBtn: document.querySelector('[data-modal-watched]'),\r\n  loadQueueBtn: document.querySelector('[data-modal-queue]'),\r\n  addWatchedBtn: document.querySelector('[data-add-watched]'),\r\n  addQueueBtn: document.querySelector('[data-add-queue]'),\r\n  openModalTeamBtn: document.querySelector('.js-openModalTeam'),\r\n  modalTeamOverlay: document.querySelector('.js-modalTeam__overlay'),\r\n  closeModalTeamBtn: document.querySelector('.js-closeModalTeam'),\r\n  btnNextPagination: document.querySelector('[data-next-pagination]'),\r\n  btnPrevPagination: document.querySelector('[data-prev-pagination]'),\r\n  paginationControls: document.querySelector('[data-pagination-controls-list]'),\r\n};\r\nexport default refs;\r\n","import refs from './refs';\r\n\r\nrefs.openModalTeamBtn.addEventListener('click', onOpenModalTeam);\r\nrefs.closeModalTeamBtn.addEventListener('click', onCloseModalTeam);\r\nrefs.modalTeamOverlay.addEventListener('click', onOverlayModalTeamClick);\r\n\r\nfunction onOpenModalTeam() {\r\n  refs.modalTeamOverlay.classList.add('show');\r\n  window.addEventListener('keydown', onPressEscape);\r\n}\r\nfunction onCloseModalTeam() {\r\n  refs.modalTeamOverlay.classList.remove('show');\r\n  window.addEventListener('keydown', onPressEscape);\r\n}\r\nfunction onOverlayModalTeamClick(event) {\r\n  event.preventDefault();\r\n  if (event.target === event.currentTarget) {\r\n    onCloseModalTeam();\r\n  }\r\n}\r\n\r\nfunction onPressEscape(event) {\r\n  if (event.code === 'Escape') {\r\n    onCloseModalTeam();\r\n  }\r\n}\r\n","const genres = [\r\n  { id: 28, name: 'Action' },\r\n  { id: 12, name: 'Adventure' },\r\n  { id: 16, name: 'Animation' },\r\n  { id: 35, name: 'Comedy' },\r\n  { id: 80, name: 'Crime' },\r\n  { id: 99, name: 'Documentary' },\r\n  { id: 18, name: 'Drama' },\r\n  { id: 10751, name: 'Family' },\r\n  { id: 14, name: 'Fantasy' },\r\n  { id: 36, name: 'History' },\r\n  { id: 27, name: 'Horror' },\r\n  { id: 10402, name: 'Music' },\r\n  { id: 9648, name: 'Mystery' },\r\n  { id: 10749, name: 'Romance' },\r\n  { id: 878, name: 'Science Fiction' },\r\n  { id: 10770, name: 'TV Movie' },\r\n  { id: 53, name: 'Thriller' },\r\n  { id: 10752, name: 'War' },\r\n  { id: 37, name: 'Western' },\r\n];\r\nexport default genres;\r\n","const API_KEY = 'e25e680121e89083bb4ba7c0772c65fc';\r\nconst BASE_URL_TRENDING = 'https://api.themoviedb.org/3/trending/all/day';\r\nconst BASE_URL_SEARCH = 'https://api.themoviedb.org/3/search/movie';\r\nconst BASE_URL_MOVIEID = 'https://api.themoviedb.org/3/movie';\r\nconst POSTER_URL = 'https://themoviedb.org/t/p/w220_and_h330_face';\r\nconst GENRE_MOVIE_LIST = 'https://api.themoviedb.org/3/genre/movie/list';\r\n\r\nimport movieCard from '../templates/movieCard.hbs';\r\nimport modalMovieCard from '../templates/modal-movie-card.hbs';\r\nimport genres from './genres';\r\nimport refs from './refs';\r\n\r\nexport default class ApiService {\r\n  #delta = 2;\r\n  constructor(selectControl) {\r\n    this.totalPagas = 0;\r\n    this.page = 1;\r\n    this.searchQuery = '';\r\n    this.watched = [];\r\n    this.queue = [];\r\n    this._watchedFromLocalStorage = [];\r\n    this._queueFromLocalStorage = [];\r\n    this.selectControl = selectControl;\r\n  }\r\n\r\n  fetchMovieByID(id_movie) {\r\n    return fetch(`${BASE_URL_MOVIEID}/${id_movie}?api_key=${API_KEY}`).then(\r\n      response => {\r\n        if (response.status === '404') throw new Error();\r\n        response.json();\r\n      },\r\n    );\r\n  }\r\n\r\n  movieAdapter({\r\n    poster_path,\r\n    original_title,\r\n    original_name,\r\n    title,\r\n    id,\r\n    vote_average,\r\n    release_date,\r\n    first_air_date,\r\n    vote_count,\r\n    popularity,\r\n    overview,\r\n    genre_ids,\r\n  }) {\r\n    return {\r\n      //имена imgSrc, title, rating, releaseDate СВЕРИТЬ с именами в ПРАВИЛЬНОМ шаблоне карточки\r\n      imgSrc: this.generatePosterPath(poster_path),\r\n      title: original_title || original_name || title,\r\n      rating: vote_average,\r\n      releaseDate:\r\n        Number.parseInt(release_date) || Number.parseInt(first_air_date),\r\n      voteCount: vote_count,\r\n      popularity: popularity,\r\n      overview: overview,\r\n      id: id,\r\n      genre: this.changeGenresList(genre_ids),\r\n    };\r\n  }\r\n  changeGenresList(ids) {\r\n    const genresIdsArr = genres.map((_el, index) => genres[index].id);\r\n    const newArr = ids\r\n      .map(el => {\r\n        return genresIdsArr.indexOf(el);\r\n      })\r\n      .filter(el => el !== -1)\r\n      .map(el => genres[el].name);\r\n\r\n    if (!newArr.length) {\r\n      return 'NO GЕNRE';\r\n    }\r\n    return newArr.length > 2\r\n      ? newArr.slice(0, 2).join(', ') + ', OTHER'\r\n      : newArr.join(',');\r\n  }\r\n  //Запрос базы жанров  - на будущее\r\n  fetchGenresMovieList() {\r\n    return fetch(\r\n      `${GENRE_MOVIE_LIST}?api_key=${API_KEY}&page=${this.page}`,\r\n    ).then(response => response.json());\r\n  }\r\n\r\n  generatePosterPath(imageName) {\r\n    return `${POSTER_URL}${imageName}`;\r\n  }\r\n\r\n  fetchSearchMoviesList(query) {\r\n    return fetch(\r\n      `${BASE_URL_SEARCH}?api_key=${API_KEY}&query=${query}&page=${this.page}`,\r\n    )\r\n      .then(responce => responce.json())\r\n      .then(movies => {\r\n        this.totalPagas = movies.total_pages;\r\n        this.testfoo();\r\n        return movies;\r\n      });\r\n  }\r\n\r\n  fetchPopularMoviesList() {\r\n    return fetch(`${BASE_URL_TRENDING}?api_key=${API_KEY}&page=${this.page}`)\r\n      .then(response => response.json())\r\n      .then(movies => {\r\n        this.totalPagas = movies.total_pages;\r\n        this.testfoo();\r\n        return movies;\r\n      });\r\n  }\r\n  testfoo() {\r\n    if (this.selectControl === undefined) {\r\n      return;\r\n    }\r\n    this.pagination(this.page, this.totalPagas);\r\n  }\r\n  fetchWatchedMoviesList() {\r\n    this.loadWatchedMovies();\r\n    const watchedMoviesArr = this._watchedFromLocalStorage.forEach(movie => {\r\n      this.fetchMovieByID()\r\n    });\r\n    Promise.all(watchedMoviesArr)\r\n    .then(movie => console.log(movie))\r\n    .catch(error => console.log(error));\r\n  }\r\n\r\n  fetchQueueMoviesList() {}\r\n\r\n  fetchModalMovie() {}\r\n\r\n  loadWatchedMovies() {\r\n    //после вызова функции в this._watchedFromLocalStorage будет массив с localStorage\r\n    const watchedString = localStorage.getItem('watched');\r\n    this._watchedFromLocalStorage = JSON.parse(watchedString);\r\n  }\r\n\r\n  loadQueueMovies() {\r\n    //после вызова функции в this._queueFromLocalStorage будет массив с localStorage\r\n    const queueString = localStorage.getItem('queue');\r\n    this._queueFromLocalStorage = JSON.parse(queueString);\r\n  }\r\n  get watchedFromLocalStorage() {\r\n    //для проверки\r\n    return this._watchedFromLocalStorage;\r\n  }\r\n  get queueFromLocalStorage() {\r\n    //для проверки\r\n    return this._queueFromLocalStorage;\r\n  }\r\n\r\n  addWatchedMovies(movieId) {\r\n    this.watched.push(movieId);\r\n    localStorage.setItem('watched', JSON.stringify(this.watched));\r\n  }\r\n  addQueueMovies(movieId) {\r\n    this.queue.push(movieId);\r\n    localStorage.setItem('queue', JSON.stringify(this.queue));\r\n  }\r\n\r\n  renderMovieCards(moviesArray) {\r\n    refs.moviesCardsGallery.insertAdjacentHTML(\r\n      'beforeend',\r\n      movieCard(moviesArray),\r\n    );\r\n  }\r\n\r\n  renderMovie(movieObj) {}\r\n\r\n  checkValueLocalStorage() {\r\n    this.loadQueueMovies();\r\n    if (!this.queue === []) return;\r\n    localStorage.setItem('queue', JSON.stringify(this.queue));\r\n    this.loadWatchedMovies();\r\n    if (!this.watched === []) return;\r\n    localStorage.setItem('watched', JSON.stringify(this.watched));\r\n  }\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  // сборная солянки\r\n  pagination(current, last) {\r\n    let code = this.addButtonWithIndex(1);\r\n\r\n    if (current - this.#delta > 2) code += this.addButtonInput();\r\n\r\n    for (let i = current - this.#delta; i <= current + this.#delta; i++) {\r\n      if (i > 1 && i < last) {\r\n        code += this.addButtonWithIndex(i);\r\n      }\r\n    }\r\n\r\n    if (current + this.#delta < last - 1) code += this.addButtonInput();\r\n\r\n    code += this.addButtonWithIndex(last);\r\n\r\n    this.selectControl.innerHTML = code;\r\n  }\r\n\r\n  addButtonWithIndex(index) {\r\n    return ` <li class=\"pagination-controls__item\"><button id='pagination_${index}' class='pagination-controls__btn' type='button' >${index}</button></li>`;\r\n  }\r\n  addButtonInput() {\r\n    return ` <li class=\"pagination-controls__item\"><input class=\"pagination-controls__input\" type=\"number\" placeholder=\"...\" maxlength=\"4\"/></li>`;\r\n  }\r\n\r\n  goToPrevPage() {\r\n    if (this.page === 1) {\r\n      return;\r\n    }\r\n    this.page -= 1;\r\n  }\r\n\r\n  goToNextPage() {\r\n    if (this.page === this.totalPagas + 1) {\r\n      return;\r\n    }\r\n    this.page += 1;\r\n  }\r\n\r\n  // конец сборная солянки\r\n}\r\n","import '@pnotify/core/dist/BrightTheme.css';\r\n\r\nconst { error } = require('@pnotify/core');\r\nconst { defaults } = require('@pnotify/core');\r\ndefaults.closer = false;\r\ndefaults.sticker = false;\r\ndefaults.delay = 2000;\r\ndefaults.shadow = true;\r\n\r\nfunction pluginError() {\r\n  return error({\r\n    text: 'Please enter CORRECT query',\r\n  });\r\n}\r\n\r\nexport { pluginError };\r\n","import './main.scss';\r\nimport './js/back-to-top';\r\nimport './js/firebase-login';\r\nimport './js/modal-team';\r\nimport refs from './js/refs'; /* ждём, пока у нас появятся все нужные имена классов для querySelector */\r\nimport ApiService from './js/api';\r\nconst debounce = require('lodash.debounce');\r\nimport { pluginError } from './js/pluginOn';\r\nimport './js/theme-switch';\r\n\r\nconst Api = new ApiService(refs.paginationControls);\r\n\r\nwindow.addEventListener('load', loadPage);\r\n\r\nrefs.btnPrevPagination.addEventListener('click', () => {\r\n  Api.goToPrevPage();\r\n  if (!Api.searchQuery) {\r\n    return fetchPopularMoviesListTEST();\r\n  }\r\n  onSearchTEST();\r\n});\r\nrefs.btnNextPagination.addEventListener('click', () => {\r\n  Api.goToNextPage();\r\n  if (!Api.searchQuery) {\r\n    return fetchPopularMoviesListTEST();\r\n  }\r\n  onSearchTEST();\r\n});\r\nrefs.paginationControls.addEventListener('click', event => {\r\n  if (event.target.nodeName === 'BUTTON') {\r\n    const a = Number(event.target.textContent);\r\n    Api.page = a;\r\n    if (!Api.searchQuery) {\r\n      fetchPopularMoviesListTEST();\r\n      return;\r\n    }\r\n    onSearchTEST();\r\n  }\r\n});\r\nrefs.paginationControls.addEventListener('focusout', event => {\r\n  if (event.target.nodeName === 'INPUT') {\r\n    const a = Number(event.target.value);\r\n    Api.page = a;\r\n    if (!Api.searchQuery) {\r\n      fetchPopularMoviesListTEST();\r\n      return;\r\n    }\r\n    onSearchTEST();\r\n  }\r\n});\r\n\r\n//Функция проверки текущей страницы\r\nfunction loadPage() {\r\n  Api.checkValueLocalStorage();\r\n  const currentPage = document.getElementsByTagName('html')[0];\r\n  if (currentPage.classList.contains('main-page')) {\r\n    fetchPopularMoviesList();\r\n    refs.searchInput.addEventListener('input', debounce(onSearch, 500));\r\n  }\r\n  if (currentPage.classList.contains('library-page')) {\r\n    refs.loadWatchedBtn.addEventListener('click', loadWatched);\r\n    refs.loadQueueBtn.addEventListener('click', loadQueue);\r\n    loadWatched(); //по умолчанию, отрисовываются просмотренные фильмы\r\n  }\r\n}\r\n\r\n//Функция запроса популярных фильмов и отрисовка галлереи карточек - запускается при загрузке главной страницы\r\nfunction fetchPopularMoviesList() {\r\n  clear();\r\n  Api.resetPage();\r\n  Api.fetchPopularMoviesList().then(movies => movieAdaptedandRender(movies));\r\n}\r\n\r\nfunction fetchPopularMoviesListTEST() {\r\n  clear();\r\n  Api.fetchPopularMoviesList().then(movies => movieAdaptedandRender(movies));\r\n}\r\n\r\n//Функция поиска фильмов по слову - запускается по вводу в инпуте\r\nfunction onSearch(event) {\r\n  event.preventDefault();\r\n  clear();\r\n  Api.resetPage();\r\n  Api.searchQuery = event.target.value;\r\n  console.log('Api.searchQuery:', Api.searchQuery); //что ищем???\r\n  if (!Api.searchQuery) {\r\n    return fetchPopularMoviesList();\r\n  }\r\n  Api.fetchSearchMoviesList(Api.searchQuery).then(movies => {\r\n    movieAdaptedandRender(movies);\r\n    if (!movies.total_results) {\r\n      return pluginError();\r\n    }\r\n  });\r\n}\r\nfunction onSearchTEST() {\r\n  clear();\r\n  Api.searchQuery = refs.searchInput.value;\r\n  Api.fetchSearchMoviesList(Api.searchQuery).then(movies => {\r\n    movieAdaptedandRender(movies);\r\n    if (!movies.total_results) {\r\n      return pluginError();\r\n    }\r\n  });\r\n}\r\n\r\n//Функция очистки галлереи фильмов\r\nfunction clear() {\r\n  refs.moviesCardsGallery.innerHTML = '';\r\n}\r\n//Функция адаптации пути img и отрисовка\r\nfunction movieAdaptedandRender(movies) {\r\n  if (movies.results) {\r\n    const moviesArray = movies.results.map(movie => Api.movieAdapter(movie));\r\n    return Api.renderMovieCards(moviesArray);\r\n  }\r\n  return Api.renderMovieCards(movies);\r\n}\r\n\r\n//Функция отрисовывает просмотренные фильмы пользователя\r\nfunction loadWatched() {\r\n  clear();\r\n  Api.resetPage();\r\n  refs.loadWatchedBtn.classList.add('active-btn');\r\n  refs.loadQueueBtn.classList.remove('active-btn');\r\n  console.log('отрисовать просмотренные фильмы');\r\n  Api.fetchWatchedMoviesList().then(movies => movieAdaptedandRender(movies));\r\n}\r\n//Функция отрисовывает фильмы добавленные в очередь пользователя\r\nfunction loadQueue() {\r\n  clear();\r\n  Api.resetPage();\r\n  refs.loadWatchedBtn.classList.remove('active-btn');\r\n  refs.loadQueueBtn.classList.add('active-btn');\r\n  console.log('отрисовать фильмы добавленные в очередь пользователя');\r\n  Api.fetchQueueMoviesList().then(movies => movieAdaptedandRender(movies));\r\n}","const config = {\r\n    apiKey: \"AIzaSyAx1D-g2qGeJxBdozCO3pfPZvfg5l9yeUc\",\r\n    authDomain: \"my-project-2d288.firebaseapp.com\",\r\n    projectId: \"my-project-2d288\",\r\n    storageBucket: \"my-project-2d288.appspot.com\",\r\n    messagingSenderId: \"582082591029\",\r\n    appId: \"1:582082591029:web:64d668bc5f471d6b8eb47c\",\r\n    measurementId: \"G-NMM570TBES\"\r\n};\r\nfirebase.initializeApp(config);\r\n    \r\nconst openLogInModal = document.querySelector('.lightbox');\r\nconst LogInRef = document.querySelector('button[data-action=\"login-lightbox\"]');\r\nconst closeModalBtn = document.querySelector('button[data-action=\"close-lightbox\"]');\r\nconst logInBtnRef = document.querySelector('button[data-action=\"logIn\"]');\r\nconst logOutBtnRef = document.querySelector('button[data-action=\"logOut\"]');\r\nconst signInBtnRef = document.querySelector('button[data-action=\"signIn\"]');\r\nconst closeOverlayRef = document.querySelector('.lightbox__overlay');\r\n\r\nconst auth = firebase.auth();\r\n\r\n//--------------------------------LogIn Modal--------------------------------//\r\nLogInRef.addEventListener('click', onLogInClick);\r\ncloseModalBtn.addEventListener('click', closeModal);\r\ncloseOverlayRef.addEventListener('click', closeOverlay);\r\nlogInBtnRef.addEventListener('click', logIn);\r\nlogOutBtnRef.addEventListener('click', logOut);\r\nsignInBtnRef.addEventListener('click', signUp);\r\n\r\nfunction onLogInClick(event) {\r\n  event.preventDefault();\r\n  openLogInModal.classList.add('is-open');\r\n  window.addEventListener('keydown', isEscape);\r\n}\r\n\r\nfunction closeModal(event) {\r\n  event.preventDefault();\r\n  openLogInModal.classList.remove('is-open');\r\n  window.removeEventListener('keydown', isEscape);\r\n}\r\n\r\nfunction closeOverlay(event) {\r\n  event.preventDefault();\r\n  if (event.target === event.currentTarget) {\r\n    closeModal(event);\r\n  }\r\n}\r\n\r\n//---------------------------SignUp Modal-----------------------------//\r\nconst openSignUpModal = document.querySelector('.lightbox_2');\r\nconst SignUpRef = document.querySelector('button[data-action=\"signup-lightbox\"]');\r\nconst closeSignUpModalBtn = document.querySelector('button[data-action=\"close-signup-lightbox\"]');\r\nconst closeSignUpOverlayRef = document.querySelector('.lightbox__overlay_2');\r\n\r\nSignUpRef.addEventListener('click', onSignUpClick);\r\ncloseSignUpModalBtn.addEventListener('click', closeSignUpModal);\r\ncloseSignUpOverlayRef.addEventListener('click', closeSignUpOverlay);\r\n\r\nfunction onSignUpClick(event) {\r\n  event.preventDefault();\r\n  openSignUpModal.classList.add('is-open');\r\n  window.addEventListener('keydown', isEscape);\r\n}\r\n\r\nfunction closeSignUpModal(event) {\r\n  event.preventDefault();\r\n  openSignUpModal.classList.remove('is-open');\r\n  window.removeEventListener('keydown', isEscape);\r\n}\r\n\r\nfunction closeSignUpOverlay(event) {\r\n  event.preventDefault();\r\n  if (event.target === event.currentTarget) {\r\n     closeSignUpModal(event);\r\n    }\r\n}\r\n\r\nfunction isEscape(event) {\r\n  if (event.code === 'Escape') {\r\n     closeModal(event);\r\n     closeSignUpModal(event);\r\n    } \r\n}\r\n\r\n//------------------------Firebase---------------------//\r\n\r\nfunction signUp() {\r\n\t\t\r\n   const email = document.getElementById(\"email\");\r\n   const password = document.getElementById(\"password\");\r\n   const promise = auth.createUserWithEmailAndPassword(email.value, password.value);\r\n   promise.catch(e => alert(e.message));\r\n   openSignUpModal.classList.remove('is-open');\r\n   alert(\"New account is created\");\r\n}\r\n\t\r\nfunction logIn(){\r\n\t\t\r\n\tconst email = document.getElementById(\"email_field\");\r\n\tconst password = document.getElementById(\"password_field\");\r\n\t\t\r\n\tconst promise = auth.signInWithEmailAndPassword(email.value, password.value);\r\n    promise.catch(e => alert(e.message));\r\n    openLogInModal.classList.remove('is-open');\r\n    alert(\"You are successfully logged in!\");\r\n}\r\n\t\r\nfunction logOut() {\r\n\t\t\r\n    auth.signOut();\r\n    openLogInModal.classList.remove('is-open');\r\n\talert(\"Hope to see you soon\");\r\n}\r\n\t\r\nauth.onAuthStateChanged(function(user) {\r\n\t\t\r\n\tif(user) {\r\n       \r\n      document.getElementById(\"user_div\").style.display = \"block\";\r\n      document.getElementById(\"login_div\").style.display = \"none\";\r\n\t\t\t\r\n\t} else {\r\n\t\tdocument.getElementById(\"user_div\").style.display = \"none\";\r\n        document.getElementById(\"login_div\").style.display = \"block\";\r\n\t}\r\n});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"movie__list-item\\\">\\r\\n    <div class=\\\"movie-card__wrapper-img\\\">\\r\\n        <img class=\\\"movie-card__img\\\" src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"imgSrc\") || (depth0 != null ? lookupProperty(depth0,\"imgSrc\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"imgSrc\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":41},\"end\":{\"line\":6,\"column\":51}}}) : helper)))\n    + \" alt='' data-movie-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":74},\"end\":{\"line\":6,\"column\":80}}}) : helper)))\n    + \"\\\">\\r\\n    </div>\\r\\n    <h3 class=\\\"movie-card__name\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":33},\"end\":{\"line\":8,\"column\":42}}}) : helper)))\n    + \"</h3>\\r\\n    <p class=\\\"movie-card__description\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genres\") || (depth0 != null ? lookupProperty(depth0,\"genres\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genres\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":39},\"end\":{\"line\":9,\"column\":49}}}) : helper)))\n    + \" <span>|</span> \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"releaseDate\") || (depth0 != null ? lookupProperty(depth0,\"releaseDate\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"releaseDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":65},\"end\":{\"line\":9,\"column\":80}}}) : helper)))\n    + \"</p>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":12,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"modal-movie-card\\\">\\r\\n    <div class=\\\"movie-image-wrapper\\\">\\r\\n        <img class=\\\"movie-image\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"backdropPath\") || (depth0 != null ? lookupProperty(depth0,\"backdropPath\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"backdropPath\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":38},\"end\":{\"line\":3,\"column\":54}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":61},\"end\":{\"line\":3,\"column\":70}}}) : helper)))\n    + \"\\\" data-movie-id =\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":88},\"end\":{\"line\":3,\"column\":94}}}) : helper)))\n    + \"\\\">\\r\\n    </div>\\r\\n    <div class=\\\"movie-card-info\\\">\\r\\n        <h1 class=\\\"movie-name\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":31},\"end\":{\"line\":6,\"column\":40}}}) : helper)))\n    + \"</h1>\\r\\n\\r\\n        <div class=\\\"movie-detail-wrapper\\\">\\r\\n\\r\\n            <div class=\\\"movie-detail-item\\\">\\r\\n                <p class=\\\"movie-detail-item-p\\\">Vote/Votes</p>\\r\\n                <p class=\\\"movie-detail-item-p\\\">Popularity</p>\\r\\n                <p class=\\\"movie-detail-item-p\\\">Original Title</p>\\r\\n                <p class=\\\"movie-detail-item-p\\\">Genre</p>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"movie-detail-value\\\">\\r\\n                <p class=\\\"movie-detail-value-p\\\"><span class=\\\"movie-rating\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"voteAverage\") || (depth0 != null ? lookupProperty(depth0,\"voteAverage\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"voteAverage\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":18,\"column\":75},\"end\":{\"line\":18,\"column\":90}}}) : helper)))\n    + \"</span>/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"voteCount\") || (depth0 != null ? lookupProperty(depth0,\"voteCount\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"voteCount\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":18,\"column\":98},\"end\":{\"line\":18,\"column\":111}}}) : helper)))\n    + \"</p>\\r\\n                <p class=\\\"movie-detail-value-p\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"popularity\") || (depth0 != null ? lookupProperty(depth0,\"popularity\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"popularity\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":48},\"end\":{\"line\":19,\"column\":62}}}) : helper)))\n    + \"</p>\\r\\n                <p class=\\\"movie-detail-value-p\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"originalTitle\") || (depth0 != null ? lookupProperty(depth0,\"originalTitle\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"originalTitle\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":48},\"end\":{\"line\":20,\"column\":65}}}) : helper)))\n    + \"</p>\\r\\n\\r\\n                <p class=\\\"movie-detail-value-p\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genres\") || (depth0 != null ? lookupProperty(depth0,\"genres\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genres\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":48},\"end\":{\"line\":22,\"column\":58}}}) : helper)))\n    + \"</p>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <h2 class=\\\"movie-about\\\">About</h2>\\r\\n        <p class=\\\"movie-description\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"overview\") || (depth0 != null ? lookupProperty(depth0,\"overview\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"overview\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":37},\"end\":{\"line\":27,\"column\":49}}}) : helper)))\n    + \"</p>\\r\\n\\r\\n        <div class=\\\"btn-wrapper\\\">\\r\\n\\r\\n            <button class=\\\"btn btn-details btn-active__details first-btn\\\" type=\\\"button\\\" data-add-watched=\\\"\\\"\\r\\n                data-movie-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":31},\"end\":{\"line\":32,\"column\":37}}}) : helper)))\n    + \"\\\">add to watched</button>\\r\\n            <button class=\\\"btn btn-details\\\" type=\\\"button\\\" data-add-queue=\\\"\\\" data-movie-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":91},\"end\":{\"line\":33,\"column\":97}}}) : helper)))\n    + \"\\\">add to queue</button>\\r\\n        </div>\\r\\n    </div>\\r\\n    <button class=\\\"modal-close-btn\\\" type=\\\"button\\\">\\r\\n        <svg width=\\\"14px\\\" height=\\\"14px\\\">\\r\\n            <use href=\\\"../images/symbol-defs.svg#icon-close\\\"></use>\\r\\n        </svg>\\r\\n    </button>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}