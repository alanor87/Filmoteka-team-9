(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/JAH":function(e,t){var n=document.querySelector("#theme-switch-toggle"),a="light-theme",o="dark-theme";n.addEventListener("change",(function(){var e=localStorage.getItem("theme")===a?o:a;document.body.className=e,localStorage.setItem("theme",e)})),localStorage.getItem("theme")?(document.body.className=localStorage.getItem("theme"),n.checked=localStorage.getItem("theme")!==a):localStorage.setItem("theme",a)},OSpC:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("lmye"),n("fp7Y"),n("OSpC");var a=n("Ji62");Object(a.addBackToTop)({diameter:56,backgroundColor:"#ddd",textColor:"#ff6b08"});n("eXOY");var o={searchInput:document.querySelector(".search-input"),moviesCardsGallery:document.querySelector(".movie__list"),movieInfoModal:document.querySelector(".modal-movie"),loadWatchedBtn:document.querySelector("[data-modal-watched]"),loadQueueBtn:document.querySelector("[data-modal-queue]"),addWatchedBtn:document.querySelector("[data-add-watched]"),addQueueBtn:document.querySelector("[data-add-queue]"),openModalTeamBtn:document.querySelector(".js-openModalTeam"),modalTeamOverlay:document.querySelector(".js-modalTeam__overlay"),closeModalTeamBtn:document.querySelector(".js-closeModalTeam"),btnNextPagination:document.querySelector("[data-next-pagination]"),btnPrevPagination:document.querySelector("[data-prev-pagination]"),paginationControls:document.querySelector("[data-pagination-controls-list]")};function i(){o.modalTeamOverlay.classList.remove("show"),window.addEventListener("keydown",l)}function l(e){"Escape"===e.code&&i()}o.openModalTeamBtn.addEventListener("click",(function(){o.modalTeamOverlay.classList.add("show"),window.addEventListener("keydown",l)})),o.closeModalTeamBtn.addEventListener("click",i),o.modalTeamOverlay.addEventListener("click",(function(e){e.preventDefault(),e.target===e.currentTarget&&i()}));n("lYjL"),n("RtS0"),n("uQK7"),n("/YXa"),n("8cZI"),n("WB5j"),n("D/wG"),n("+XsM"),n("JBxO"),n("FdtR"),n("WoWj"),n("qoNQ"),n("3dw1"),n("U00V");var r=n("h8BN"),c=n.n(r),s=(n("pKAy"),[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]),u=n("dcBu").create('<div class="windows8">\n<div class="wBall" id="wBall_1">\n    <div class="wInnerBall"></div>\n</div>\n<div class="wBall" id="wBall_2">\n    <div class="wInnerBall"></div>\n</div>\n<div class="wBall" id="wBall_3">\n    <div class="wInnerBall"></div>\n</div>\n<div class="wBall" id="wBall_4">\n    <div class="wInnerBall"></div>\n</div>\n<div class="wBall" id="wBall_5">\n    <div class="wInnerBall"></div>\n</div>\n</div>');function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}document.querySelector(".search-input").addEventListener("click",(function(){u.show()}));var h="e25e680121e89083bb4ba7c0772c65fc",v=new WeakMap,p=function(){function e(e){v.set(this,{writable:!0,value:2}),this.totalPagas=0,this.page=1,this.searchQuery="",this.watched=[],this.queue=[],this._watchedFromLocalStorage=[],this._queueFromLocalStorage=[],this.selectControl=e}var t,n,a,i=e.prototype;return i.fetchMovieByID=function(e){return fetch("https://api.themoviedb.org/3/movie/"+e+"?api_key="+h).then((function(e){if("404"===e.status)throw new Error;e.json()}))},i.movieAdapter=function(e){var t=e.poster_path,n=e.original_title,a=e.original_name,o=e.title,i=e.id,l=e.vote_average,r=e.release_date,c=e.first_air_date,s=e.vote_count,u=e.popularity,d=e.overview,m=e.genre_ids;return{imgSrc:this.generatePosterPath(t),title:n||a||o,rating:l,releaseDate:Number.parseInt(r)||Number.parseInt(c),voteCount:s,popularity:u,overview:d,id:i,genre:this.changeGenresList(m)}},i.changeGenresList=function(e){var t=s.map((function(e,t){return s[t].id})),n=e.map((function(e){return t.indexOf(e)})).filter((function(e){return-1!==e})).map((function(e){return s[e].name}));return n.length?n.length>2?n.slice(0,2).join(", ")+", OTHER":n.join(","):"NO GЕNRE"},i.fetchGenresMovieList=function(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key="+h+"&page="+this.page).then((function(e){return e.json()}))},i.generatePosterPath=function(e){return"https://themoviedb.org/t/p/w220_and_h330_face"+e},i.fetchSearchMoviesList=function(e){var t=this;return fetch("https://api.themoviedb.org/3/search/movie?api_key="+h+"&query="+e+"&page="+this.page).then((function(e){return e.json()})).then((function(e){return t.totalPagas=e.total_pages,t.testfoo(),e}))},i.fetchPopularMoviesList=function(){var e=this;return fetch("https://api.themoviedb.org/3/trending/all/day?api_key="+h+"&page="+this.page).then((function(e){return e.json()})).then((function(t){return e.totalPagas=t.total_pages,e.testfoo(),t}))},i.testfoo=function(){void 0!==this.selectControl&&this.pagination(this.page,this.totalPagas)},i.fetchWatchedMoviesList=function(){var e=this;this.loadWatchedMovies();var t=this._watchedFromLocalStorage.forEach((function(t){e.fetchMovieByID()}));Promise.all(t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},i.fetchQueueMoviesList=function(){},i.fetchModalMovie=function(){},i.loadWatchedMovies=function(){var e=localStorage.getItem("watched");this._watchedFromLocalStorage=JSON.parse(e)},i.loadQueueMovies=function(){var e=localStorage.getItem("queue");this._queueFromLocalStorage=JSON.parse(e)},i.addWatchedMovies=function(e){this.watched.push(e),localStorage.setItem("watched",JSON.stringify(this.watched))},i.addQueueMovies=function(e){this.queue.push(e),localStorage.setItem("queue",JSON.stringify(this.queue))},i.renderMovieCards=function(e){u.close(),o.moviesCardsGallery.insertAdjacentHTML("beforeend",c()(e))},i.renderMovie=function(e){},i.checkValueLocalStorage=function(){this.loadQueueMovies(),!this.queue!==[]&&(localStorage.setItem("queue",JSON.stringify(this.queue)),this.loadWatchedMovies(),!this.watched!==[]&&localStorage.setItem("watched",JSON.stringify(this.watched)))},i.incrementPage=function(){this.page+=1},i.resetPage=function(){this.page=1},i.pagination=function(e,t){var n=this.addButtonWithIndex(1);e-m(this,v)>2&&(n+=this.addButtonInput());for(var a=e-m(this,v);a<=e+m(this,v);a++)a>1&&a<t&&(n+=this.addButtonWithIndex(a));e+m(this,v)<t-1&&(n+=this.addButtonInput()),n+=this.addButtonWithIndex(t),this.selectControl.innerHTML=n},i.addButtonWithIndex=function(e){return' <li class="pagination-controls__item"><button id=\'pagination_'+e+"' class='pagination-controls__btn' type='button' >"+e+"</button></li>"},i.addButtonInput=function(){return' <li class="pagination-controls__item"><input class="pagination-controls__input" type="number" placeholder="..." maxlength="4"/></li>'},i.goToPrevPage=function(){1!==this.page&&(this.page-=1)},i.goToNextPage=function(){this.page!==this.totalPagas+1&&(this.page+=1)},t=e,(n=[{key:"watchedFromLocalStorage",get:function(){return this._watchedFromLocalStorage}},{key:"queueFromLocalStorage",get:function(){return this._queueFromLocalStorage}}])&&d(t.prototype,n),a&&d(t,a),e}(),g=(n("zrP5"),n("QJ3N").error),f=n("QJ3N").defaults;function y(){return g({text:"Please enter CORRECT query"})}f.closer=!1,f.sticker=!1,f.delay=2e3,f.shadow=!0;n("/JAH");var w=n("jffb"),b=new p(o.paginationControls);function L(){k(),b.resetPage(),b.fetchPopularMoviesList().then((function(e){return E(e)}))}function S(){k(),b.fetchPopularMoviesList().then((function(e){return E(e)}))}function _(e){if(u.show(),k(),b.resetPage(),b.searchQuery=e.target.value,console.log("Api.searchQuery:",b.searchQuery),!b.searchQuery)return L();b.fetchSearchMoviesList(b.searchQuery).then((function(e){if(E(e),!e.total_results)return y()}))}function B(){k(),b.searchQuery=o.searchInput.value,b.fetchSearchMoviesList(b.searchQuery).then((function(e){if(E(e),!e.total_results)return y()}))}function k(){o.moviesCardsGallery.innerHTML=""}function E(e){if(e.results){var t=e.results.map((function(e){return b.movieAdapter(e)}));return b.renderMovieCards(t)}return b.renderMovieCards(e)}function I(){k(),b.resetPage(),o.loadWatchedBtn.classList.add("active-btn"),o.loadQueueBtn.classList.remove("active-btn"),console.log("отрисовать просмотренные фильмы"),b.fetchWatchedMoviesList().then((function(e){return E(e)}))}function P(){k(),b.resetPage(),o.loadWatchedBtn.classList.remove("active-btn"),o.loadQueueBtn.classList.add("active-btn"),console.log("отрисовать фильмы добавленные в очередь пользователя"),b.fetchQueueMoviesList().then((function(e){return E(e)}))}window.addEventListener("load",(function(){b.checkValueLocalStorage();var e=document.getElementsByTagName("html")[0];e.classList.contains("main-page")&&(L(),o.searchInput.addEventListener("input",w(_,500)));e.classList.contains("library-page")&&(o.loadWatchedBtn.addEventListener("click",I),o.loadQueueBtn.addEventListener("click",P),I())})),o.btnPrevPagination.addEventListener("click",(function(){if(b.goToPrevPage(),!b.searchQuery)return S();B()})),o.btnNextPagination.addEventListener("click",(function(){if(b.goToNextPage(),!b.searchQuery)return S();B()})),o.paginationControls.addEventListener("click",(function(e){if("BUTTON"===e.target.nodeName){var t=Number(e.target.textContent);if(b.page=t,!b.searchQuery)return void S();B()}})),o.paginationControls.addEventListener("focusout",(function(e){if("INPUT"===e.target.nodeName){var t=Number(e.target.value);if(b.page=t,!b.searchQuery)return void S();B()}}))},eXOY:function(e,t){firebase.initializeApp({apiKey:"AIzaSyAx1D-g2qGeJxBdozCO3pfPZvfg5l9yeUc",authDomain:"my-project-2d288.firebaseapp.com",projectId:"my-project-2d288",storageBucket:"my-project-2d288.appspot.com",messagingSenderId:"582082591029",appId:"1:582082591029:web:64d668bc5f471d6b8eb47c",measurementId:"G-NMM570TBES"});var n=document.querySelector(".lightbox"),a=document.querySelector('button[data-action="login-lightbox"]'),o=document.querySelector('button[data-action="close-lightbox"]'),i=document.querySelector('button[data-action="logIn"]'),l=document.querySelector('button[data-action="logOut"]'),r=document.querySelector('button[data-action="signIn"]'),c=document.querySelector(".lightbox__overlay"),s=firebase.auth();function u(e){e.preventDefault(),n.classList.remove("is-open"),window.removeEventListener("keydown",g)}a.addEventListener("click",(function(e){e.preventDefault(),n.classList.add("is-open"),window.addEventListener("keydown",g)})),o.addEventListener("click",u),c.addEventListener("click",(function(e){e.preventDefault(),e.target===e.currentTarget&&u(e)})),i.addEventListener("click",(function(){var e=document.getElementById("email_field"),t=document.getElementById("password_field");s.signInWithEmailAndPassword(e.value,t.value).catch((function(e){return alert(e.message)})),n.classList.remove("is-open"),alert("You are successfully logged in!")})),l.addEventListener("click",(function(){s.signOut(),n.classList.remove("is-open"),alert("Hope to see you soon")})),r.addEventListener("click",(function(){var e=document.getElementById("email"),t=document.getElementById("password");s.createUserWithEmailAndPassword(e.value,t.value).catch((function(e){return alert(e.message)})),d.classList.remove("is-open"),alert("New account is created")}));var d=document.querySelector(".lightbox_2"),m=document.querySelector('button[data-action="signup-lightbox"]'),h=document.querySelector('button[data-action="close-signup-lightbox"]'),v=document.querySelector(".lightbox__overlay_2");function p(e){e.preventDefault(),d.classList.remove("is-open"),window.removeEventListener("keydown",g)}function g(e){"Escape"===e.code&&(u(e),p(e))}m.addEventListener("click",(function(e){e.preventDefault(),d.classList.add("is-open"),window.addEventListener("keydown",g)})),h.addEventListener("click",p),v.addEventListener("click",(function(e){e.preventDefault(),e.target===e.currentTarget&&p(e)})),s.onAuthStateChanged((function(e){e?(document.getElementById("user_div").style.display="block",document.getElementById("login_div").style.display="none"):(document.getElementById("user_div").style.display="none",document.getElementById("login_div").style.display="block")}))},h8BN:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,o){var i,l=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",s=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="movie__list-item">\r\n    <div class="movie-card__wrapper-img">\r\n        <img class="movie-card__img" src='+s(typeof(i=null!=(i=u(n,"imgSrc")||(null!=t?u(t,"imgSrc"):t))?i:r)===c?i.call(l,{name:"imgSrc",hash:{},data:o,loc:{start:{line:6,column:41},end:{line:6,column:51}}}):i)+" alt='' data-movie-id=\""+s(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:r)===c?i.call(l,{name:"id",hash:{},data:o,loc:{start:{line:6,column:74},end:{line:6,column:80}}}):i)+'">\r\n    </div>\r\n    <h3 class="movie-card__name">'+s(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:r)===c?i.call(l,{name:"title",hash:{},data:o,loc:{start:{line:8,column:33},end:{line:8,column:42}}}):i)+'</h3>\r\n    <p class="movie-detail-value-p">'+s(typeof(i=null!=(i=u(n,"genre")||(null!=t?u(t,"genre"):t))?i:r)===c?i.call(l,{name:"genre",hash:{},data:o,loc:{start:{line:9,column:36},end:{line:9,column:45}}}):i)+'<span class="movie-card__description"> | '+s(typeof(i=null!=(i=u(n,"releaseDate")||(null!=t?u(t,"releaseDate"):t))?i:r)===c?i.call(l,{name:"releaseDate",hash:{},data:o,loc:{start:{line:9,column:86},end:{line:9,column:101}}}):i)+"</span></p>\r\n\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var i;return"\r\n"+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:12,column:9}}}))?i:"")},useData:!0})},pKAy:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var i,l=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",s=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-movie-card">\r\n    <div class="movie-image-wrapper">\r\n        <img class="movie-image" src="'+s(typeof(i=null!=(i=u(n,"backdropPath")||(null!=t?u(t,"backdropPath"):t))?i:r)===c?i.call(l,{name:"backdropPath",hash:{},data:o,loc:{start:{line:3,column:38},end:{line:3,column:54}}}):i)+'" alt="'+s(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:r)===c?i.call(l,{name:"title",hash:{},data:o,loc:{start:{line:3,column:61},end:{line:3,column:70}}}):i)+'" data-movie-id ="'+s(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:r)===c?i.call(l,{name:"id",hash:{},data:o,loc:{start:{line:3,column:88},end:{line:3,column:94}}}):i)+'">\r\n    </div>\r\n    <div class="movie-card-info">\r\n        <h1 class="movie-name">'+s(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:r)===c?i.call(l,{name:"title",hash:{},data:o,loc:{start:{line:6,column:31},end:{line:6,column:40}}}):i)+'</h1>\r\n\r\n        <div class="movie-detail-wrapper">\r\n\r\n            <div class="movie-detail-item">\r\n                <p class="movie-detail-item-p">Vote/Votes</p>\r\n                <p class="movie-detail-item-p">Popularity</p>\r\n                <p class="movie-detail-item-p">Original Title</p>\r\n                <p class="movie-detail-item-p">Genre</p>\r\n            </div>\r\n\r\n            <div class="movie-detail-value">\r\n                <p class="movie-detail-value-p"><span class="movie-rating">'+s(typeof(i=null!=(i=u(n,"voteAverage")||(null!=t?u(t,"voteAverage"):t))?i:r)===c?i.call(l,{name:"voteAverage",hash:{},data:o,loc:{start:{line:18,column:75},end:{line:18,column:90}}}):i)+"</span>/"+s(typeof(i=null!=(i=u(n,"voteCount")||(null!=t?u(t,"voteCount"):t))?i:r)===c?i.call(l,{name:"voteCount",hash:{},data:o,loc:{start:{line:18,column:98},end:{line:18,column:111}}}):i)+'</p>\r\n                <p class="movie-detail-value-p">'+s(typeof(i=null!=(i=u(n,"popularity")||(null!=t?u(t,"popularity"):t))?i:r)===c?i.call(l,{name:"popularity",hash:{},data:o,loc:{start:{line:19,column:48},end:{line:19,column:62}}}):i)+'</p>\r\n                <p class="movie-detail-value-p">'+s(typeof(i=null!=(i=u(n,"originalTitle")||(null!=t?u(t,"originalTitle"):t))?i:r)===c?i.call(l,{name:"originalTitle",hash:{},data:o,loc:{start:{line:20,column:48},end:{line:20,column:65}}}):i)+'</p>\r\n\r\n                <p class="movie-detail-value-p">'+s(typeof(i=null!=(i=u(n,"genres")||(null!=t?u(t,"genres"):t))?i:r)===c?i.call(l,{name:"genres",hash:{},data:o,loc:{start:{line:22,column:48},end:{line:22,column:58}}}):i)+'</p>\r\n            </div>\r\n        </div>\r\n\r\n        <h2 class="movie-about">About</h2>\r\n        <p class="movie-description">'+s(typeof(i=null!=(i=u(n,"overview")||(null!=t?u(t,"overview"):t))?i:r)===c?i.call(l,{name:"overview",hash:{},data:o,loc:{start:{line:27,column:37},end:{line:27,column:49}}}):i)+'</p>\r\n\r\n        <div class="btn-wrapper">\r\n\r\n            <button class="btn btn-details btn-active__details first-btn" type="button" data-add-watched=""\r\n                data-movie-id="'+s(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:r)===c?i.call(l,{name:"id",hash:{},data:o,loc:{start:{line:32,column:31},end:{line:32,column:37}}}):i)+'">add to watched</button>\r\n            <button class="btn btn-details" type="button" data-add-queue="" data-movie-id="'+s(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:r)===c?i.call(l,{name:"id",hash:{},data:o,loc:{start:{line:33,column:91},end:{line:33,column:97}}}):i)+'">add to queue</button>\r\n        </div>\r\n    </div>\r\n    <button class="modal-close-btn" type="button">\r\n        <svg width="14px" height="14px">\r\n            <use href="../images/symbol-defs.svg#icon-close"></use>\r\n        </svg>\r\n    </button>\r\n</div>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.c8ad0ef773a41ef9a240.js.map